<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
<!-- Header !-->
	<head>
		<title>Ursinus CS 173: Introduction To Computer Science, Spring 2020</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<!--[if lte IE 8]><script src="../../assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="../../assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="../../assets/css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><link rel="stylesheet" href="../../assets/css/ie8.css" /><![endif]-->
        <script type="text/javascript" src="../processing.min.js"></script>
        <style>
        .image_off, #home:hover .image_on{
           display:none
        }
        .image_on, #home:hover .image_off{
           display:block
        }
        #editor {
            position: relative;
            width: 700px;
            height: 250px;
        }
        #editor2 {
            position: relative;
            width: 700px;
            height: 250px;
        }
        #mainEditor {
            position: relative;
            width: 700px;
            height: 100px;
        }
        #feedbackText {
            position: relative;
            width: 700px;
            height: 100px;
        }

        </style>

        <script src="../ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="../modules-common.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<body>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">
						<div class="inner">

							<!-- Header -->
								<header id="header">
									<a href="../../index.html" class="logo"><strong>Ursinus CS 173: Introduction To Computer Science, Spring 2020</strong></a>
								</header>
<!-- End Header !-->

							<!-- Content -->
								<section>
									<header class="main">
										<h2>Lab 11: Recursion Code Part 3: Merge Sort</h2>
									</header>

                                <p>
                                    <button onclick="window.location.href = 'video5.html';"> &lt--- Previous</button>
                                </p>
                                <HR>

                                    <p>
                                        Below is the majority of the code for merge sort, as well as some array utilities we wrote last lab.  The main method fills in a random array, prints that array, calls the <code>mergeSort</code> method, and then prints the result.  Please fill in the while loop in the <code>mergeSort</code> method that performs the merging step.  If you've done this properly, the resulting array will come back in sorted order.  At this point, a survey will pop up.  <b>Please input your name, and also copy in the code that you wrote in the while loop.</b>
                                    </p>

                                    <h3>Hints</h3>
                                    <ul>
                                        <li>Review the video on the previous page for some hints.</li>
                                    </ul>


<div id="correctArea"></div>


<p>
<button type = "button" onclick = "runCode()">Run</button>
</p>
<h3>Array Utilities / Insertion Sort Code</h3>

<div id="editor">/**
* Create a random array of ints
* @param N How many random numbers we want
* @return An array with this many random numbers
*/
public static int[] getRandomArray(int N) {
    int[] arr = new int[N];
    for (int i = 0; i < N; i++) {
        arr[i] = (int)(Math.random()*2*N);
    }
    return arr;
}

/**
* Print out the elements of an array separated by spaces
* @param arr An array of ints
*/
public static void printArray(int[] arr) {
    for (int i = 0; i < arr.length; i++) {
        System.out.print(arr[i]);
        if (i < arr.length - 1) {
            System.out.print(" ");
        }
    }
    System.out.println("");
}

/**
* Copy over an array
* @param arr An array of ints
* @return A copy of this array
*/
public static int[] cloneArray(int[] arr) {
   int[] copy = new int[arr.length];
   for (int i = 0; i < arr.length; i++) {
       copy[i] = arr[i];
   }
   return copy;
}

/**
* Take out a slice of the array starting at a particular index
* and ending just before another index
* @param arr
* @param i1 Starting index
* @param i2 One past our last index
* @return 
*/
public static int[] cloneArrayPart(int[] arr, int i1, int i2) {
   int N = i2 - i1;
   int[] slice = new int[N];
   for (int i = 0; i < N; i++) {
       slice[i] = arr[i1+i];
   }
   return slice;
}

/**
* Swap the element at index i for the element at index j
* element at index j
* @param arr An array of ints
* @param i First index
* @param j Second index
*/
public static void swap(int[] arr, int i, int j) {
    int temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
}

/**
* Implement the insertion sort algorithm to
* sort the elements of an array in place
* @param arr 
*/
public static void insertionSort(int[] arr) {
    for (int i = 1; i < arr.length; i++) {
        int j = i;
        while (j >= 1 && arr[j] < arr[j-1]) {
            swap(arr, j, j-1);
            j--;
        }
    }
}</div>

<h3>Merge Sort Code</h3>
<div id = "editor2">public static int MIN_LENGTH = 5;

public static int[] mergeSort(int[] arr) {
    int[] result = {};
    if (arr.length < 5) {
        result = cloneArray(arr);
        insertionSort(result);
    }
    else {
        result = new int[arr.length];
        int halfway = (int)(arr.length / 2);
        int[] list1 = cloneArrayPart(arr, 0, halfway);
        int[] list2 = cloneArrayPart(arr, halfway, arr.length);
        list1 = mergeSort(list1);
        list2 = mergeSort(list2);
        int i1 = 0;
        int i2 = 0;
        int i = 0;
        while (i1 < list1.length && i2 < list2.length && i < result.length) {
            // TODO: Fill this in
            // if list1[i1] < list2[i2], then copy 
            // list1[i1] over to result[i], move i1 over
            // to the right by 1
            
            // otherwise, do the opposite
            
            i++;
        }
        while (i1 < list1.length) {
            result[i] = list1[i1];
            i1++;
            i++;
        }
        while (i2 < list2.length) {
            result[i] = list2[i2];
            i2++;
            i++;
        }
    }
    return result;
}    
</div>
<h3>Main</h3>
<div id="mainEditor">int[] arr = getRandomArray(25);
System.out.print("Original: ");
printArray(arr);
arr = mergeSort(arr);
System.out.print("Sorted: ");
printArray(arr);</div>

<h3>Output</h3>
<div id="feedbackText"></div>

<canvas id="pscanvas"></canvas>


<script>
let canvas = document.getElementById("pscanvas");
let correctArea = document.getElementById("correctArea");

let editor = ace.edit("editor");
editor.setFontSize(16);
editor.session.setMode("ace/mode/java");
editor.setReadOnly(true);

let editor2 = ace.edit("editor2");
editor2.setFontSize(16);
editor2.session.setMode("ace/mode/java");

let mainEditor = ace.edit("mainEditor");
mainEditor.setFontSize(16);
mainEditor.session.setMode("ace/mode/java");
mainEditor.setReadOnly(true);

let feedback = ace.edit("feedbackText");
feedback.setFontSize(16);
feedback.renderer.setShowGutter(false);


function runCode() {

try {
    let code = makeCode(editor.getValue() + editor2.getValue(), mainEditor.getValue());
    instance = new Processing(canvas, code);
    let arr1 = feedbackString.split("\n")[0].split(" ");
    let arr2 = feedbackString.split("\n")[1].split(" ");
    for (let i = 1; i < arr1.length; i++) {
        arr1[i-1] = parseInt(arr1[i]);
        arr2[i-1] = parseInt(arr2[i]);
    }
    arr1.length = arr1.length - 1;
    arr2.length = arr2.length - 1;
    arr1.sort(function(a, b){return a-b});

    console.log(arr1);
    console.log(arr2);
    let equal = true;
    for (let i = 0; i < arr1.length && equal; i++) {
        if (arr1[i] != arr2[i]) {
            equal = false;
        }
    }
    if (equal) {
        correctArea.innerHTML = "<h3><font color = #00AA00>Correct!!</font></h3>";
        correctArea.innerHTML += `
        <iframe src = "https://ursinus.co1.qualtrics.com/jfe/form/SV_9ymXoEPa5WPfZtP" width=800 height=500>
        `;
    }
    else {
        correctArea.innerHTML = "<h3><font color = red>Try again</font></h3>";
    }
}
catch(err) {
    feedback.setValue("Error: " + err.message);
}

}



</script>

















                                    </div> <!--Page-content-->
                        </div> <!-- Inner-->
                    </div> <!-- Main-->
                </div> <!-- Wrapper-->
<!-- Scripts -->
			<script src="../../assets/js/jquery.min.js"></script>
			<script src="../../assets/js/skel.min.js"></script>
			<script src="../../assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="../../assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="../../assets/js/main.js"></script>
<!-- End Scripts -->
	</body>
</html>

